{
    "DevPort": 4000,
    "Api": {
        "Auth": {
            "getSess": {
                "Params": "{}",
                "Response": "{title:string, id: string}[]",
                "Program": [
                    "# $cRels => &UserRel.Find|mID=$UserID|rel=1",
                    " const { getBindingID } = ( await import('./binding-id') );",
                    "const result = cRels.map( ( r:UserRel ) => { return { id: getBindingID( $UserID, r.sID ), title: getBindingID( $UserID, r.sID ) }  } )",
                    "$Return = result"
                ]
            },
            "creSes": {
                "Params": "{toID: string}",
                "Response": "{ done: boolean, chatID: string }",
                "Program": [
                    "const toID = $Params.toID",
                    "# $toUser => &User.Find|userID=toID",
                    " if( !toUser ) { $Return = { done: false, chatID: '' } } ",
                    " else { ",
                    "# &UserRel.Insert|mID=$UserID|sID=toID|rel=1",
                    " const chatID = ( await import('./binding-id') ).getBindingID( toID, $UserID );",
                    "$Return = { done: true, chatID }",
                    "}"
                ]
            },
            "deleteUser": {
                "Params": "{userID: string}",
                "Response": "{done: boolean}",
                "Program": [
                    "# &User.Delete|userID=$Params.userID ",
                    " $Return = { done: true };"
                ]
            },
            "insertUser": {
                "Params": "{userID: string}",
                "Response": "{done: boolean}",
                "Program": [
                    "# &User.Insert|userID=$Params.userID ",
                    " $Return = { done: true };"
                ]
            }
        },
        "Unauth": {
            "login": {
                "Params": "{userID: string, pwd: string}",
                "Response": "{done: boolean}",
                "Program": [
                    "# $user => &User.FindOne|userID=$Params.userID ",
                    " $Return = { done: Boolean( user && user.pwd === $Params.pwd ) };"
                ]
            },
            "reg": {
                "Params": "{userID: string, pwd: string, userNick: string}",
                "Response": "{done: boolean}",
                "Program": [
                    "# $user => &User.FindOne|userID=$Params.userID ",
                    " if( !user ) { ",
                    "# &User.Insert|userID=$Params.userID|userNick=$Params.userNick|pwd=$Params.pwd ",
                    " $Return = { done: true };",
                    "}",
                    "else { $Return = { done: false } }"
                ]
            }
        }
    }
}